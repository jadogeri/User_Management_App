{"file":"C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\configs\\ioc.config.ts","mappings":"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","names":[],"sources":["C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\configs\\ioc.config.ts"],"sourcesContent":["// src/ioc.config.ts\r\nimport { Container, decorate, injectable } from 'inversify';\r\nimport { DataSource } from 'typeorm';\r\nimport { Controller } from 'tsoa';\r\nimport { buildProviderModule } from \"inversify-binding-decorators\";\r\nimport { TYPES } from '../types/binding.type';\r\nimport { AuthServiceInterface} from '../interfaces/auth-service.interface';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { AuthRepositoryInterface } from '../interfaces/auth-repository.interface';\r\nimport { AuthRepository } from '../repositories/auth.repository';\r\nimport { AuthController } from '../controllers/auth.controller';\r\nimport { UserServiceInterface} from '../interfaces/user-service.interface';\r\nimport { UserService } from '../services/user.service';\r\nimport { UserRepositoryInterface } from '../interfaces/user-repository.interface';\r\nimport { UserRepository } from '../repositories/user.repository';\r\nimport { UserController } from '../controllers/user.controller';\r\n\r\nimport { DatabaseServiceInterface } from '../interfaces/database-service.interface';\r\nimport { SQLiteService } from '../services/sqlite.service';\r\nimport PasswordGeneratorService from '../services/password-generator.service';\r\nimport { PasswordGeneratorInterface } from '../interfaces/password-generator.interface';\r\n import { CredentialValidatorServiceInterface } from '../interfaces/credential-validator-service.interface';\r\nimport CredentialValidatorService from '../services/credential-validator.service';\r\nimport { EmailServiceInterface } from '../interfaces/email-service.interface';\r\nimport EmailService from '../services/email.service';\r\nimport { TokenGeneratorInterface } from '../interfaces/token-generator.interface';\r\nimport TokenGeneratorService from '../services/token-generator.service';\r\nimport { CookieStorageInterface } from '../interfaces/cookie-storage.interface';\r\nimport CookieStorageService from '../services/cookie-storage.service';\r\nimport { TokenValidatorInterface } from '../interfaces/token-validator.interface';\r\nimport TokenValidatorService from '../services/token-validator.service';\r\nimport { AccessControlInterface } from '../interfaces/access-control.interface';\r\nimport AccessControlService from '../services/access-control.service';\r\nimport { ProfileRepositoryInterface } from '../interfaces/profile-repository.interface';\r\nimport { ProfileRepository } from '../repositories/profile.repository';\r\nimport { ProfileService } from '../services/profile.service';\r\nimport { ProfileServiceInterface } from '../interfaces/profile-service.interface';\r\nimport { ProfileController } from '../controllers/profile.controller';\r\nimport { ContactController } from '../controllers/contact.controller';\r\nimport { ContactControllerInterface } from '../interfaces/contact-controller.interface';\r\nimport { ContactService } from '../services/contact.service';\r\nimport { ContactServiceInterface } from '../interfaces/contact-service.interface';\r\nimport { ContactRepositoryInterface } from '../interfaces/contact-repository.interface';\r\nimport { ContactRepository } from '../repositories/contact.repository';\r\n// // import { UserController } from '../controllers/user.controller';\r\n\r\n\r\n// import TokenGeneratorService from '../services/token-generator.service';\r\n// import { TokenGeneratorInterface } from '../interfaces/token-generator.interface';\r\n\r\n\r\n\r\nconst iocContainer = new Container();\r\n\r\ndecorate(injectable(), Controller); \r\niocContainer.load(buildProviderModule());\r\n\r\n  //  0. bind controllers\r\n    iocContainer.bind<UserController>(UserController).toSelf();\r\n    iocContainer.bind<AuthController>(AuthController).toSelf();\r\n    iocContainer.bind<ProfileController>(ProfileController).toSelf();\r\n    iocContainer.bind<ContactControllerInterface>(ContactController).toSelf();\r\n\r\n\r\n    // 1. Bind the service that manages the connection\r\n    iocContainer.bind<SQLiteService>(SQLiteService).toSelf().inSingletonScope();\r\n    iocContainer.bind<DatabaseServiceInterface>(TYPES.DatabaseServiceInterface).to(SQLiteService).inSingletonScope();\r\n    iocContainer.bind<AuthServiceInterface>(TYPES.AuthServiceInterface).to(AuthService).inSingletonScope();\r\n    iocContainer.bind<UserServiceInterface>(TYPES.UserServiceInterface).to(UserService).inSingletonScope();\r\n    iocContainer.bind<ContactServiceInterface>(TYPES.ContactServiceInterface).to(ContactService).inSingletonScope();\r\n    iocContainer.bind<ProfileServiceInterface>(TYPES.ProfileServiceInterface).to(ProfileService).inSingletonScope();\r\n    iocContainer.bind<PasswordGeneratorInterface>(TYPES.PasswordGeneratorInterface).to(PasswordGeneratorService).inSingletonScope();\r\n\r\n\r\n    // 2. Bind the Repository (it will wait for TYPES.DataSource to be available)\r\n    iocContainer.bind<UserRepositoryInterface>(TYPES.UserRepositoryInterface).to(UserRepository).inSingletonScope();\r\n    iocContainer.bind<AuthRepositoryInterface>(TYPES.AuthRepositoryInterface).to(AuthRepository).inSingletonScope();\r\n    iocContainer.bind<ProfileRepositoryInterface>(TYPES.ProfileRepositoryInterface).to(ProfileRepository).inSingletonScope();\r\n    iocContainer.bind<ContactRepositoryInterface>(TYPES.ContactRepositoryInterface).to(ContactRepository).inSingletonScope();\r\n\r\n\r\n    iocContainer.bind<CredentialValidatorServiceInterface>(TYPES.CredentialValidatorServiceInterface).to(CredentialValidatorService).inSingletonScope();\r\n    iocContainer.bind<EmailServiceInterface>(TYPES.EmailServiceInterface).to(EmailService).inSingletonScope();  \r\n    iocContainer.bind<TokenGeneratorInterface>(TYPES.TokenGeneratorInterface).to(TokenGeneratorService).inSingletonScope();\r\n    iocContainer.bind<TokenValidatorInterface>(TYPES.TokenValidatorInterface).to(TokenValidatorService).inSingletonScope();\r\n    iocContainer.bind<CookieStorageInterface>(TYPES.CookieStorageInterface).to(CookieStorageService).inSingletonScope();\r\n    iocContainer.bind<AccessControlInterface>(TYPES.AccessControlInterface).to(AccessControlService).inSingletonScope();\r\n\r\n\r\n// 3. Helper to bind the live DataSource after connection\r\n/**\r\n * Binds a given DataSource instance to the IoC container as a constant value.\r\n * This allows for dependency injection of the DataSource throughout the application.\r\n * \r\n * @param {DataSource} dataSource - The DataSource instance to be bound.\r\n * @returns {void}\r\n * @throws {Error} Throws an error if the binding fails.\r\n */\r\nexport const bindDataSource = (dataSource: DataSource) => {\r\n  iocContainer.bind<DataSource>(TYPES.DataSource).toConstantValue(dataSource);\r\n};\r\n\r\nexport { iocContainer };\r\n\r\n\r\n\r\n\r\n\r\n"],"version":3}