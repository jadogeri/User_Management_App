{"file":"C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\entities\\permission.entity.ts","mappings":";;;;;;;;;;;;;;;;AAAA,qCAA6F;AAC7F,gEAAiC;AACjC,qDAAyC;AAEzC,kDAAsE;AAI/D,IAAM,UAAU,GAAhB,MAAM,UAAU;IA4BrB,cAAc;QACZ,OAAO,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;IAC3C,CAAC;CACF,CAAA;AA/BY,gCAAU;AAErB;IADC,IAAA,gCAAsB,GAAE;;sCACd;AAGX;IADC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;+CACP;AAGpB;IADC,IAAA,oBAAU,EAAC,GAAG,EAAE,CAAC,qBAAI,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC;;yCACrC;AASd;IAPC,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,aAAa;QACnB,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,oBAAQ;QACd,OAAO,EAAE,oBAAQ,CAAC,GAAG;KACtB,CAAC;IACD,IAAA,wBAAM,EAAC,oBAAQ,EAAE,EAAE,OAAO,EAAE,wEAAwE,EAAE,CAAC;kDAC9F,oBAAQ,oBAAR,oBAAQ;4CAAC;AASnB;IAPC,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,aAAa;QACnB,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,kBAAM;QACZ,OAAO,EAAE,kBAAM,CAAC,IAAI;KACrB,CAAC;IACD,IAAA,wBAAM,EAAC,kBAAM,EAAE,EAAE,OAAO,EAAE,8EAA8E,EAAE,CAAC;kDACpG,kBAAM,oBAAN,kBAAM;0CAAC;qBA1BJ,UAAU;IAFtB,IAAA,gBAAM,GAAE;IACR,IAAA,gBAAM,EAAC,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;GAClB,UAAU,CA+BtB","names":[],"sources":["C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\entities\\permission.entity.ts"],"sourcesContent":["import { Entity, PrimaryGeneratedColumn, Column, ManyToMany , Index, Unique } from 'typeorm';\r\nimport Role from './role.entity';\r\nimport { IsEnum } from 'class-validator';\r\nimport { PermissionType } from '../types/permission.type';\r\nimport { Action, RBACPermission, Resource } from '../types/rbac.type';\r\n\r\n@Entity()\r\n@Unique([\"action\", \"resource\"])\r\nexport class Permission implements PermissionType{\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  @Column({ nullable: true })\r\n  description: string;\r\n\r\n  @ManyToMany(() => Role, (role) => role.permissions)\r\n  roles: Role[];\r\n  \r\n  @Column({\r\n    type: \"simple-enum\",\r\n    nullable: false,\r\n    enum: Resource,\r\n    default: Resource.ALL,\r\n  })\r\n  @IsEnum(Resource, { message: 'resource must be a valid enum value (user, product, order, system, *).' })\r\n  resource: Resource;\r\n\r\n  @Column({\r\n    type: \"simple-enum\",\r\n    nullable: false,\r\n    enum: Action,\r\n    default: Action.READ,\r\n  })\r\n  @IsEnum(Action, { message: 'action must be a valid enum value (create, read, update, delete, manage, *).' })\r\n  action: Action;\r\n\r\n  rbacPermission(): RBACPermission {\r\n    return `${this.resource}:${this.action}`;\r\n  }\r\n}\r\n\r\n"],"version":3}