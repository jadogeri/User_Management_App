{"file":"C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\utils\\payload-generator.util.ts","mappings":";;;AAEA,iFAA2E;AAE3E;;;;;GAKG;AACI,MAAM,gBAAgB,GAAG,CAAC,IAAU,EAAuB,EAAE;IAChE,IAAI,CAAC,IAAI,EAAE,CAAC;QACR,MAAM,IAAI,gDAAqB,CAAC,2BAA2B,CAAC,CAAC;IACjE,CAAC;IACD,IAAI,OAAO,GAAyB;QAChC,IAAI,EAAE;YACF,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK;SAC7E;QACD,MAAM,EAAE,IAAI,CAAC,kBAAkB,EAAE;KACpC,CAAA;IACD,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,OAAO,CAAC,CAAC;IAChD,OAAO,OAAO,CAAC;AACnB,CAAC,CAAA;AAZY,QAAA,gBAAgB,oBAY5B","names":[],"sources":["C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\utils\\payload-generator.util.ts"],"sourcesContent":["import User from \"../entities/user.entity\"\r\nimport { JwtPayloadInterface } from \"../interfaces/jwt-payload.interface\";\r\nimport { ResourceNotFoundError } from \"../errors/resource-not-found.error\";\r\n\r\n/**\r\n * Generates a JWT payload from a User object.\r\n * @param user - The User object containing user details and permissions.\r\n * @returns JwtPayloadInterface - The constructed JWT payload.\r\n * @throws ResourceNotFoundError if the user is undefined or null.\r\n */\r\nexport const payloadGenerator = (user: User): JwtPayloadInterface => {\r\n    if (!user) {\r\n        throw new ResourceNotFoundError(\"User is undefined or null\");\r\n    }\r\n    let payload : JwtPayloadInterface = {\r\n        user: {\r\n            username: user.username, email: user.email, id: user.id, roles: user.roles\r\n        },\r\n        scopes: user.getPermissionNames(),\r\n    }\r\n    console.log(\"payload to be signed = \", payload);\r\n    return payload;\r\n}"],"version":3}