{"file":"C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\repositories\\user.repository.ts","mappings":";;;;;;;;;;;;;;;;AAAA,qCAAmE;AACnE,8CAA2C;AAC3C,yCAAmC;AACnC,wDAA8C;AAC9C,yDAA+C;AAIxC,IAAM,cAAc,GAApB,MAAM,cAAe,SAAQ,oBAAoB;IAGpD,YAAsC,UAAsB;QACxD,mFAAmF;QACnF,KAAK,CAAC,kBAAI,EAAE,UAAU,CAAC,mBAAmB,EAAE,CAAC,CAAC;IAElD,CAAC;IAED,eAAe;QACX,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC/C,CAAC;IAGD,KAAK,CAAC,WAAW,CAAC,KAAa;QAE3B,OAAO,IAAI,CAAC,OAAO,CAAC;YAChB,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE;YACvB,SAAS,EAAE;gBACP,MAAM,EAAE,IAAI;gBACZ,KAAK,EAAE;oBACH,WAAW,EAAE,IAAI,CAAC,oDAAoD;iBACzE;aACJ;SACJ,CAAC,CAAC;IACP,CAAC;IAID,KAAK,CAAC,cAAc,CAAC,QAAgB;QACjC,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAC;IAC3D,CAAC;IAGD,KAAK,CAAC,QAAQ,CAAC,EAAU;QACrB,OAAO,IAAI,CAAC,OAAO,CAAC;YAChB,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;YACjB,SAAS,EAAE,CAAC,OAAO,EAAE,mBAAmB,CAAC,EAAE,2BAA2B;SACzE,CAAC,CAAC;IACP,CAAC;CACJ,CAAA;AAxCY,wCAAc;yBAAd,cAAc;IAD1B,IAAA,uBAAU,GAAE;IAII,WAAA,IAAA,kBAAM,EAAC,oBAAK,CAAC,UAAU,CAAC,CAAA;yDAAa,oBAAU,oBAAV,oBAAU;GAHnD,cAAc,CAwC1B","names":[],"sources":["C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\repositories\\user.repository.ts"],"sourcesContent":["import { DataSource, Repository as BaseRepository } from \"typeorm\";\r\nimport { Repository } from \"../decorators\";\r\nimport { inject } from \"inversify\";\r\nimport { TYPES } from \"../types/binding.type\";\r\nimport { User } from \"../entities/user.entity\";\r\nimport { UserRepositoryInterface } from \"../interfaces/user-repository.interface\";\r\n\r\n@Repository()\r\nexport class UserRepository extends BaseRepository<User> implements UserRepositoryInterface {\r\n    \r\n\r\n    constructor(@inject(TYPES.DataSource) dataSource: DataSource) {\r\n        //console.log(\"Registered Entities:\", dataSource.entityMetadatas.map(m => m.name));\r\n        super(User, dataSource.createEntityManager());\r\n        \r\n    }\r\n\r\n    findActiveUsers(): Promise<User[]> {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n\r\n    async findByEmail(email: string): Promise<User | null> {                \r\n        \r\n        return this.findOne({\r\n            where: { email: email },\r\n            relations: {\r\n                status: true,\r\n                roles: {\r\n                    permissions: true // This drills down into the Role -> Permission link\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    async findByUsername(username: string): Promise<User | null> {\r\n        return this.findOne({ where: { username: username } });\r\n    }\r\n\r\n\r\n    async findById(id: number): Promise<User | null> {\r\n        return this.findOne({\r\n            where: { id: id },\r\n            relations: [\"roles\", \"roles.permissions\"], // Specify nested relations\r\n        });    \r\n    }\r\n}\r\n\r\n\r\n"],"version":3}