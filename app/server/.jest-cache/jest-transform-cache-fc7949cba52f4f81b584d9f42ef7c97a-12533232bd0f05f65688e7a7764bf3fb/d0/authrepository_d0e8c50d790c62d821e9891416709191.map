{"file":"C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\repositories\\auth.repository.ts","mappings":";;;;;;;;;;;;;;;;AAAA,qCAAmE;AACnE,8CAA2C;AAC3C,yCAAmC;AACnC,wDAA8C;AAE9C,yDAA+C;AAIxC,IAAM,cAAc,GAApB,MAAM,cAAe,SAAQ,oBAAoB;IAGpD,YAAsC,UAAsB;QACxD,mFAAmF;QACnF,KAAK,CAAC,kBAAI,EAAE,UAAU,CAAC,mBAAmB,EAAE,CAAC,CAAC;IAElD,CAAC;IACD,KAAK;QACD,OAAO,EAAC,OAAO,EAAE,qCAAqC,EAAE,CAAC;IAE7D,CAAC;IACD,MAAM;QACF,OAAO,EAAC,OAAO,EAAE,sCAAsC,EAAE,CAAC;IAC9D,CAAC;IACD,MAAM;QACF,OAAO,EAAC,OAAO,EAAE,0CAA0C,EAAE,CAAC;IAClE,CAAC;IACD,KAAK;QACD,OAAO,EAAC,OAAO,EAAE,yCAAyC,EAAE,CAAC;IACjE,CAAC;IAED,OAAO;QACH,OAAO,EAAC,OAAO,EAAE,wCAAwC,EAAE,CAAC;IAChE,CAAC;IACD,eAAe;QACX,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC/C,CAAC;IAED,UAAU,CAAC,IAAU;QACjB,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC/C,CAAC;IACD,YAAY,CAAC,MAAc;QAEvB,OAAO,IAAI,CAAC,OAAO,CAAC;YAChB,KAAK,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE;YAC/B,SAAS,EAAE,CAAC,MAAM,EAAE,YAAY,EAAC,wBAAwB,CAAC,EAAE,2BAA2B;SAC1F,CAAC,CAAC;IAEP,CAAC;IACD,kBAAkB,CAAC,KAAa;QAC5B,OAAO,IAAI,CAAC,OAAO,CAAC;YAChB,KAAK,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE;YAC9B,SAAS,EAAE,CAAC,MAAM,EAAE,YAAY,EAAC,wBAAwB,CAAC,EAAE,2BAA2B;SAC1F,CAAC,CAAC;IACP,CAAC;CAEJ,CAAA;AA/CY,wCAAc;yBAAd,cAAc;IAD1B,IAAA,uBAAU,GAAE;IAII,WAAA,IAAA,kBAAM,EAAC,oBAAK,CAAC,UAAU,CAAC,CAAA;yDAAa,oBAAU,oBAAV,oBAAU;GAHnD,cAAc,CA+C1B","names":[],"sources":["C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\repositories\\auth.repository.ts"],"sourcesContent":["import { DataSource, Repository as BaseRepository } from \"typeorm\";\r\nimport { Repository } from \"../decorators\";\r\nimport { inject } from \"inversify\";\r\nimport { TYPES } from \"../types/binding.type\";\r\nimport { User } from \"../entities/user.entity\";\r\nimport { Auth } from \"../entities/auth.entity\";\r\nimport { AuthRepositoryInterface } from \"../interfaces/auth-repository.interface\";\r\n\r\n@Repository()\r\nexport class AuthRepository extends BaseRepository<Auth> implements AuthRepositoryInterface {\r\n    \r\n\r\n    constructor(@inject(TYPES.DataSource) dataSource: DataSource) {\r\n        //console.log(\"Registered Entities:\", dataSource.entityMetadatas.map(m => m.name));\r\n        super(Auth, dataSource.createEntityManager());\r\n        \r\n    }\r\n    login(): any {\r\n        return {message: \"Login user endpoint from repository\" };\r\n      \r\n    }\r\n    logout(): any {\r\n        return {message: \"Logout user endpoint from repository\" };\r\n    }\r\n    forgot(): any {\r\n        return {message: \"Forgot password endpoint from repository\" };\r\n    }\r\n    reset(): any {\r\n        return {message: \"Reset password endpoint from repository\" };\r\n    }\r\n\r\n    refresh(): any {\r\n        return {message: \"Refresh token endpoint from repository\" };\r\n    }\r\n    findActiveAuths(): Promise<Auth[]> {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    findByUser(user: User): Promise<Auth | null> {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    findByUserId(userId: number): Promise<Auth | null> {\r\n\r\n        return this.findOne({ \r\n            where: { user: { id: userId } }, \r\n            relations: [\"user\", \"user.roles\",\"user.roles.permissions\"], // Specify nested relations\r\n        });\r\n        \r\n    }\r\n    findByRefreshToken(token: string): Promise<Auth | null> {\r\n        return this.findOne({\r\n            where: { refreshToken: token },\r\n            relations: [\"user\", \"user.roles\",\"user.roles.permissions\"], // Specify nested relations\r\n        });    \r\n    }\r\n    \r\n}\r\n\r\n\r\n"],"version":3}