{"file":"C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\services\\user.service.ts","mappings":";;;;;;;;;;;;;AAAA,8CAAmD;AAInD,wDAA8C;AAG9C,iFAA4E;AAK5E,uFAAkF;AAKlF,mFAA8E;AAC9E,uFAAkF;AAClF,6FAAwF;AAQxF,iFAA2E;AAGpE,IAAM,WAAW,GAAjB,MAAM,WAAW;IAepB,KAAK,CAAC,MAAM,CAAC,MAAc;QACvB,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxD,IAAG,CAAC,IAAI,EAAC,CAAC;YACN,MAAM,IAAI,gDAAqB,CAAC,gBAAgB,MAAM,aAAa,CAAC,CAAC;QACzE,CAAC;QACD,MAAM,YAAY,GAAwB;YACtC,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,YAAY,EAAE,IAAI,CAAC,YAAY;YAC/B,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,EAAE,EAAE,IAAI,CAAC,EAAE;YACX,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,QAAQ,EAAE,IAAI,CAAC,QAAQ;SAC1B,CAAA;QACD,OAAO,YAAY,CAAC;IACxB,CAAC;IACD,MAAM;QACF,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC/C,CAAC;IACD,MAAM;QACF,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC/C,CAAC;IACD,UAAU;QACN,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC/C,CAAC;IACD,UAAU;QACN,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC/C,CAAC;CAEJ,CAAA;AA9CY,kCAAW;AAIH;IADhB,IAAA,sBAAS,EAAC,oBAAK,CAAC,uBAAuB,CAAC;kDACN,mDAAuB,oBAAvB,mDAAuB;mDAAC;AAE1C;IADhB,IAAA,sBAAS,EAAC,oBAAK,CAAC,qBAAqB,CAAC;kDACN,+CAAqB,oBAArB,+CAAqB;iDAAC;AAEtC;IADhB,IAAA,sBAAS,EAAC,oBAAK,CAAC,oBAAoB,CAAC;kDACN,6CAAoB,oBAApB,6CAAoB;gDAAC;AAEpC;IADhB,IAAA,sBAAS,EAAC,oBAAK,CAAC,uBAAuB,CAAC;kDACA,mDAAuB,oBAAvB,mDAAuB;0DAAC;AAEhD;IADhB,IAAA,sBAAS,EAAC,oBAAK,CAAC,0BAA0B,CAAC;kDACA,yDAA0B,oBAA1B,yDAA0B;6DAAC;sBAZ9D,WAAW;IADvB,IAAA,oBAAO,GAAE;GACG,WAAW,CA8CvB","names":[],"sources":["C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\services\\user.service.ts"],"sourcesContent":["import { AutoWired, Service } from \"../decorators\";\r\nimport { ErrorResponse } from \"../models/error-response.model\";\r\nimport {hash} from \"bcrypt\";\r\nimport * as bcrypt from \"bcrypt\";\r\nimport { TYPES } from \"../types/binding.type\";\r\nimport { User } from \"../entities/user.entity\";\r\nimport { Recipient } from \"../types/recipient.type\";\r\nimport { AuthServiceInterface } from \"../interfaces/auth-service.interface\";\r\nimport { Auth } from \"../entities/auth.entity\";\r\nimport { Request } from \"express\";\r\nimport { AuthRepositoryInterface } from \"../interfaces/auth-repository.interface\";\r\nimport { UserServiceInterface } from \"../interfaces/user-service.interface\";\r\nimport { UserRepositoryInterface } from \"../interfaces/user-repository.interface\";\r\nimport { UserCreateRequestDTO } from \"../dtos/requests/user-request.dto\";\r\nimport { EnabledStatus } from \"../data/status.data\";\r\nimport { UserRole } from \"../data/role.data\";\r\nimport { UserCreateResponseDTO, UserReadResponseDTO } from \"../dtos/responses/user-response.dto\";\r\nimport { EmailServiceInterface } from \"../interfaces/email-service.interface\";\r\nimport { TokenGeneratorInterface } from \"../interfaces/token-generator.interface\";\r\nimport { PasswordGeneratorInterface } from \"../interfaces/password-generator.interface\";\r\nimport { ConflictError } from \"../errors/conflict.error\";\r\nimport { InternalServerError } from \"../errors/internal-server.error\";\r\nimport { Repository } from \"typeorm\";\r\nimport { Role } from \"../entities/role.entity\";\r\nimport { AppDataSource } from \"../configs/typeOrm.config\";\r\nimport { RoleNamesEnum } from \"../types/role-names.type\";\r\nimport { Resource } from \"../types/rbac.type\";\r\nimport { ResourceNotFoundError } from \"../errors/resource-not-found.error\";\r\n\r\n@Service()\r\nexport class UserService implements UserServiceInterface{\r\n\r\n\r\n    @AutoWired(TYPES.UserRepositoryInterface)\r\n    private readonly userRepository!:  UserRepositoryInterface;\r\n    @AutoWired(TYPES.EmailServiceInterface)\r\n    private readonly emailService!:  EmailServiceInterface;\r\n    @AutoWired(TYPES.AuthServiceInterface)\r\n    private readonly authService!:  AuthServiceInterface;\r\n    @AutoWired(TYPES.TokenGeneratorInterface)\r\n    private readonly tokenGeneratorService!: TokenGeneratorInterface;\r\n    @AutoWired(TYPES.PasswordGeneratorInterface)\r\n    private readonly passwordGeneratorService!: PasswordGeneratorInterface;\r\n\r\n\r\n    async getOne(userId: number): Promise<any> {\r\n        const user = await this.userRepository.findById(userId);\r\n        if(!user){\r\n            throw new ResourceNotFoundError(`User with ID ${userId} not found.`);\r\n        }\r\n        const userResponse : UserReadResponseDTO ={\r\n            username: user.username,\r\n            email: user.email,\r\n            phone: user.phone,\r\n            failedLogins: user.failedLogins,\r\n            isEnabled: user.isEnabled,\r\n            id: user.id,\r\n            createdAt: user.createdAt,\r\n            updatedAt: user.updatedAt,\r\n            fullname: user.fullname\r\n        }\r\n        return userResponse;\r\n    }\r\n    getAll(): Promise<any> {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    modify(): Promise<any> {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    reactivate(): Promise<any> {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    deactivate(): Promise<any> {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    \r\n}"],"version":3}