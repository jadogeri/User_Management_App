{"file":"C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\controllers\\user.controller.ts","mappings":"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","names":[],"sources":["C:\\Users\\Joseph\\Desktop\\Source\\User_Management_App\\app\\server\\src\\controllers\\user.controller.ts"],"sourcesContent":["\r\nimport { Request, Controller as BaseController, Body, Delete, Get, Post, Put, Route, Tags, Response, Path, Example, SuccessResponse, Res, TsoaResponse, Security, NoSecurity} from \"tsoa\";\r\nimport { AutoWired, Controller, Middleware } from \"../decorators\";\r\nimport { Request as ExpressRequest,Response as ExpressResponse } from \"express\";\r\nimport { TYPES } from \"../types/binding.type\";\r\nimport loginLimitterMiddleware from \"../middlewares/login-limitter.middleware\";\r\nimport { UserControllerInterface } from \"../interfaces/user-controller.interface\";\r\nimport { UserServiceInterface } from \"../interfaces/user-service.interface\";\r\nimport { logger } from \"../configs/logger.config\";\r\nimport { UserCreateResponseDTO, UserReadResponseDTO } from \"../dtos/responses/user-response.dto\";\r\nimport { UserCreateRequestDTO } from \"../dtos/requests/user-request.dto\";\r\nimport { ErrorResponse } from \"../models/error-response.model\";\r\nimport { ValidationResponse } from \"../models/validation-response.model\";\r\nimport { CredentialValidatorServiceInterface } from \"../interfaces/credential-validator-service.interface\";\r\nimport { ResourceNotFoundError } from \"../errors/resource-not-found.error\";\r\nimport { ConflictError } from \"../errors/conflict.error\";\r\nimport { InternalServerError } from \"../errors/internal-server.error\";\r\nimport { BadRequestError } from \"../errors/bad-request.error\";\r\n\r\n\r\n@Route(\"users\")\r\n@Tags(\"User\")\r\n@Controller() \r\nexport class UserController extends BaseController implements UserControllerInterface {\r\n\r\n  @AutoWired(TYPES.UserServiceInterface)\r\n  private readonly userService!: UserServiceInterface;\r\n  @AutoWired(TYPES.CredentialValidatorServiceInterface)\r\n  private readonly credentialValidatorService!: CredentialValidatorServiceInterface\r\n\r\n\r\n  /**\r\n   * Retrieves the details of an existing user.\r\n   * Supply the unique user ID and receive corresponding user details.\r\n   * @param userId The user's identifier\r\n   * @example userId 1\r\n   * @summary Gets a single user.\r\n   * @returns The requested user.\r\n   */\r\n  @Example<UserReadResponseDTO>({\r\n   id: 1,\r\n    username: \"john1doe\",\r\n    fullname: \"John Doe\",\r\n    email: \"johndoe@tsoa.com\",\r\n    phone: \"123-456-7890\",\r\n    createdAt: new Date(\"2023-01-01T10:00:00Z\"),\r\n    updatedAt: new Date(\"2023-01-01T11:30:00Z\"),\r\n    failedLogins: 0,\r\n    isEnabled: false\r\n  })  \r\n  @SuccessResponse(\"200\", \"OK\")\r\n  @Security(\"jwt\", [\"user:read\"])\r\n  @Get(\"{userId}\")\r\n  //@Middleware(loginLimitterMiddleware)\r\n  public async getSingleUser(@Path() userId: number): Promise<UserReadResponseDTO | ErrorResponse> {\r\n    if(!userId ){\r\n      throw new BadRequestError(\"User ID is required\");\r\n    }\r\n    if(!Number.isInteger(userId)){\r\n      throw new BadRequestError(`User ID '${userId as any}' is not a valid integer`);\r\n    }\r\n    return this.userService.getOne(userId);\r\n\r\n  }  \r\n\r\n   @Security(\"jwt\",[\"\"])\r\n  // @Middleware(loggerMiddleware)\r\n  @Get(\"/get-all\")\r\n  public async getAllUsers(): Promise<any> {\r\n    return this.userService.getAll();\r\n  }\r\n  @Put(\"/modify\")\r\n  public async modifyUser(): Promise<any> {\r\n    return this.userService.modify();\r\n  }\r\n  @Delete(\"/deactivate\") \r\n  public async deactivateUser(): Promise<any> {\r\n    return this.userService.deactivate();\r\n  }\r\n\r\n  /**\r\n   * Creates a new user in the system.\r\n   * @summary Create a new user\r\n   * @param requestBody The user details for creation.\r\n   * @returns The newly created user.\r\n   */\r\n\r\n   @Post(\"/reactivate\")\r\n  public async reactivateUser(): Promise<any> {\r\n    return this.userService.reactivate();\r\n  } \r\n\r\n  @Get(\"/error\")\r\n  public async error(): Promise<any> {\r\n    logger.error(\"This is a test error from error endpoint\");\r\n    return \"Error logged\";\r\n  }\r\n\r\n    @Get(\"/warn\")\r\n  public async warn(): Promise<any> {\r\n    logger.warn(\"This is a test warn logger from warn endpoint\"); \r\n    return \"Warn logged\";}\r\n\r\n  \r\n      @Get(\"/info\")\r\n  public async info(): Promise<any> {\r\n\r\n    logger.info(\"This is a test info from info endpoint\");\r\n    return \"Info logged\";\r\n  }\r\n}\r\n\r\n"],"version":3}